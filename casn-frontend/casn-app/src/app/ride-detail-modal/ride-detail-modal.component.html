<!--********************************************************************
                          Ride Detail Modal
**********************************************************************-->
<div class="modal" *ngIf="ride && clinics">
  <div class="modal-content">
    <h1>{{ ride.appointment.patientIdentifier }}'s {{ apptTypes[ride.appointment?.appointmentTypeId] }} Appointment</h1>
    <mat-card class="appointment-card">
      <span class="bolder">{{ ride.appointment.appointmentDate | date:'MMM d, y, h:mm a'}}</span><br>
      <span class="bold">at {{ clinics[ride.appointment.clinicId].name }}</span><br>
    </mat-card>
    <div *ngIf="isDriveTo; else isDriveFrom">
      <mat-card class="mt">
        <mat-card-subtitle>Pick up patient {{ ride.appointment.patientIdentifier }} at:</mat-card-subtitle>
        <address>
          {{ ride.driveTo.startAddress }}<br>
          {{ ride.driveTo.startCity }}, {{ ride.driveTo.startState }} {{ ride.driveTo.startPostalCode }}
        </address>
      </mat-card>
      <mat-card class="mt">
        <mat-card-subtitle>Drop off at {{ clinics[ride.appointment.clinicId].name }} by {{ ride.appointment?.appointmentDate | date:'shortTime'}}:</mat-card-subtitle>
        <address>
          {{ ride.driveTo.endAddress }}<br>
          {{ ride.driveTo.endCity }}, {{ ride.driveTo.endState }} {{ ride.driveTo.endPostalCode }}
        </address>
      </mat-card>
    </div>
    <ng-template #isDriveFrom>
      <mat-card class="mt">
        <mat-card-subtitle>Pick up patient {{ ride.appointment.patientIdentifier }} at {{ clinics[ride.appointment.clinicId].name }}:</mat-card-subtitle>
        <address>
          {{ ride.driveFrom.startAddress }}<br>
          {{ ride.driveFrom.startCity }}, {{ ride.driveFrom.startState }} {{ ride.driveFrom.startPostalCode }}
        </address>
      </mat-card>
      <mat-card class="mt">
        <mat-card-subtitle>Drop off at:</mat-card-subtitle>
        <address>
          {{ ride.driveFrom.endAddress }}<br>
          {{ ride.driveFrom.endCity }}, {{ ride.driveFrom.endState }} {{ ride.driveFrom.endPostalCode }}
        </address>
      </mat-card>
    </ng-template>
    <mat-card *ngIf="volunteers" class="mt">
      <span class="bolder">Volunteers</span>
      <div *ngFor="let v of volunteers" class="volunteer-container">
        {{ v.firstName }} {{ v.lastName }}
        <button type="button"
                mat-raised-button
                (click)="handleApproveClick(v.id)"
                color="primary">Approve</button>
      </div>
    </mat-card>
    <div class="modal-actions">
      <button type="button"
              mat-raised-button
              (click)="handleApplyClick()"
              color="primary">Apply Now!</button>
      <button type="button"
              mat-raised-button
              (click)="handleCloseModalClick()"
              color="accent">Close</button>
    </div>
  </div>
</div>
