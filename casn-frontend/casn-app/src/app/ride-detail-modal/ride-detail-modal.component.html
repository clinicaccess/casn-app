<!--********************************************************************
                          Ride Detail Modal
**********************************************************************-->
<div class="modal" *ngIf="ride && clinics">
  <div class="modal-content">
    <h1>{{ ride.appointment.patientIdentifier }}'s {{ apptTypes[ride.appointment?.appointmentTypeId] }} Appointment</h1>
    <mat-card class="appointment-card">
      <span class="bolder">{{ ride.appointment.appointmentDate | date:'MMM d, y, h:mm a'}}</span><br>
      <span class="bold">at {{ clinics[ride.appointment.clinicId].name }}</span><br>
    </mat-card>
    <div>
      <mat-card class="mt">
        <mat-card-subtitle>
          Pick up patient {{ ride.appointment.patientIdentifier }} at<span *ngIf="!isDriveTo"> {{ clinics[ride.appointment.clinicId].name }}</span>:
        </mat-card-subtitle>
        <a [href]="startAddressGoogleMapLink" target="_blank">
          <address>
            {{ ride[driveType].startAddress }}<br>
            {{ ride[driveType].startCity }}, {{ ride[driveType].startState }} {{ ride[driveType].startPostalCode }}
          </address>
        </a>
      </mat-card>
      <mat-card class="mt">
        <mat-card-subtitle>
          Drop off at<span *ngIf="isDriveTo"> {{ clinics[ride.appointment.clinicId].name }} by {{ ride.appointment?.appointmentDate | date:'shortTime'}}</span>:
        </mat-card-subtitle>
        <a [href]="endAddressGoogleMapLink" target="_blank">
          <address>
            {{ ride[driveType].endAddress }}<br>
            {{ ride[driveType].endCity }}, {{ ride[driveType].endState }} {{ ride[driveType].endPostalCode }}
          </address>
        </a>
      </mat-card>
    </div>
    <mat-card *ngIf="volunteers && !driveIsApproved" class="mt">
      <span class="bolder">Volunteers</span>
      <div *ngFor="let v of volunteers" class="volunteer-container">
        {{ v.firstName }} {{ v.lastName }}
        <button type="button"
                mat-raised-button
                (click)="handleApproveClick(v.id)"
                color="primary">Approve</button>
      </div>
    </mat-card>
    <mat-card *ngIf="driveIsApproved" class="mt">
      <span class="bolder">Volunteers</span>
      <div *ngFor="let v of volunteers"
           class="volunteer-container"
           [ngClass]="{ 'approved': v.volunteerId === ride[driveType].driverId,
                        'applied': v.volunteerId !== ride[driveType].driverId }">
        {{ v.firstName }} {{ v.lastName }}
        <span *ngIf="v.volunteerId === ride[driveType].driverId">
          <mat-icon>done_all</mat-icon> Approved
        </span>
        <span  *ngIf="v.volunteerId !== ride[driveType].driverId">
          <mat-icon>done</mat-icon> Applied
        </span>
      </div>
    </mat-card>
    <div class="modal-actions">
      <button type="button"
              mat-raised-button
              (click)="handleApplyClick()"
              color="primary">Apply Now!</button>
      <button type="button"
              mat-raised-button
              (click)="handleCloseModalClick()"
              color="accent">Close</button>
    </div>
    <pre class="debug">{{ ride | json }}</pre>
  </div>
</div>
