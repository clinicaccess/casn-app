<ng-container *ngIf="rides && clinics">
  <!--********************************************************************
                            Ride Display Toggles
  **********************************************************************-->
  <div class="fixed-footer">
    <!-- <mat-button-toggle-group name="fontStyle" aria-label="Font Style" multiple>
      <mat-button-toggle value="open" [checked]="displayRides[0]" (change)="displayRides[0] = $event.source.checked">Open</mat-button-toggle>
      <mat-button-toggle value="pending" [checked]="displayRides[1]" (change)="displayRides[1] = $event.source.checked">Pending</mat-button-toggle>
      <mat-button-toggle value="approved" [checked]="displayRides[2]" (change)="displayRides[2] = $event.source.checked">Approved</mat-button-toggle>
    </mat-button-toggle-group> -->
    <!-- TODO: Switch button toggles to chip-list? -->
    <!-- <mat-chip-list>
      <mat-chip>One fish</mat-chip>
      <mat-chip>Two fish</mat-chip>
      <mat-chip color="primary" selected>Primary fish</mat-chip>
      <mat-chip color="accent" selected>Accent fish</mat-chip>
    </mat-chip-list> -->
    <!-- TODO: Insert date range switcher -->
    &lt;&lt; {{ this.startDate | date:'MMM d' }} &mdash; {{ this.endDate | date:'MMM d' }} &gt;&gt;
  </div>
  <!--********************************************************************
                                Ride Cards
  **********************************************************************-->
  <div class="date-container">
    <div class="date-card" *ngFor="let r of objectKeys(rides)" (click)="setActiveDate(r)">
      {{ r | date:'EEE' }}
      <span class="day">{{ r | date:'d' }}</span>
      {{ r | date:'MMM' }}
    </div>
  </div>
  <div *ngFor="let r of rides[activeDate]">
    <ng-container *ngIf="displayRides[r.driveTo?.status] || displayRides[r.driveFrom?.status]">
      <div class="date-container">
        {{ r.appointment?.appointmentDate | date:'EEE' }}
        <span class="day">{{ r.appointment?.appointmentDate | date:'d' }}</span>
        {{ r.appointment?.appointmentDate | date:'MMM' }}
      </div>
      <mat-card class="appointment-card">
        <span class="bolder">{{ apptTypes[r.appointment?.appointmentTypeId] }} Appointment</span> <br>
        <span class="bold">{{ r.appointment?.appointmentDate | date:'shortTime'}} at {{ clinics[r.appointment?.clinicId].name }}</span>
      </mat-card>
      <div class="drive-container">
        <mat-card *ngIf="displayRides[r.driveTo?.status]"
                  class="drive-card"
                  [ngClass]="{ 'open': r.driveTo.status === 0,
                               'pending': r.driveTo.status === 1,
                               'approved': r.driveTo.status === 2 }">
          <div class="drive-card-header">
            <mat-icon>{{ getStatusIcon(r.driveTo.status) }}</mat-icon>
            <span class="fill-remaining-space"></span>
            <mat-icon class="menu-icon">more_vert</mat-icon>
          </div>
          <p class="bold">Drive To Clinic</p>
          <p>Pick up at {{ r.driveTo.startAddress }}, {{ r.driveTo.startCity }}, {{ r.driveTo.startState }} {{ r.driveTo.startPostalCode }}.</p>
        </mat-card>
        <mat-card *ngIf="displayRides[r.driveFrom?.status]"
                  class="drive-card"
                  [ngClass]="{ 'open': r.driveFrom.status === 0,
                               'pending': r.driveFrom.status === 1,
                               'approved': r.driveFrom.status === 2 }">
          <div class="drive-card-header">
            <mat-icon>{{ getStatusIcon(r.driveFrom.status) }}</mat-icon>
            <span class="fill-remaining-space"></span>
            <mat-icon class="menu-icon">more_vert</mat-icon>
          </div>
          <p class="bold">Drive From Clinic</p>
          <p>Drop off at {{ r.driveFrom.endAddress }}, {{ r.driveFrom.endCity }}, {{ r.driveFrom.endState }} {{ r.driveFrom.endPostalCode }}.</p>
        </mat-card>
      </div>
    </ng-container>
  </div>
</ng-container>

<!--********************************************************************
                          Ride Detail Modal
**********************************************************************-->
<!-- <span class="status-text"><mat-icon>{{ getStatusIcon(r.driveFrom.status) }}</mat-icon> {{ getStatusText(r.driveFrom.status) }}</span> -->
<div *ngIf="displayRideModal" class="modal">
  <div class="modal-content">
    <h2>Ride details go here.</h2>
  </div>
</div>

<pre>
  {{ rides | json }}
</pre>
